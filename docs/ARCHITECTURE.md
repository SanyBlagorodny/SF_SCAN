# Архитектура проекта

## Обзор

- Стек: React 18, react-router-dom, CSS-модули/стили, контекст авторизации.
- Назначение: клиентский интерфейс для работы с API «СКАН» (Interfax): авторизация → поиск → результаты.
- Маршруты:
  - `/` — главная (компонент `Main`).
  - `/auth` — страница авторизации (`Authorization`).
  - `/search` — страница поиска (требует авторизации).
  - `/results` — результаты поиска (требует авторизации).

## Дерево каталогов (ключевое)

- `src/`
  - `App.js` — корневой роутер и каркас приложения 
  (`Header`, `Footer`, `Routes`).
  - `components/` — UI-компоненты экранами и секциями.
    - `Authorization/Authorization.jsx` — форма входа, запрос токена.
    - `Header/` — шапка, включает блок пользователя.
    - `Main/` — главная страница.
    - `Search/` — форма и логика поиска.
    - `SearchResults/` — отображение результатов, пагинация/ограничения.
  - `context/`
    - `AuthContext.js` — хранение состояния авторизации, проверка токена.
  - `assets/` — изображения, иконки.
  - `fonts/` — подключаемые шрифты.
  - `index.js` — входная точка React.

## Потоки данных

- Авторизация:
  - `Authorization.jsx` отправляет `POST /api/v1/account/login` с введёнными `login` и `password`.
  - При успехе сохраняет `accessToken` и `expire` в `localStorage` и устанавливает `isLoggedIn=true` через `AuthContext`.
  - `AuthContext.checkAuthStatus()` валидирует наличие и срок действия токена при монтировании приложения.
- Защищённые маршруты:
  - В `App.js` маршруты `/search` и `/results` рендерят компонент только если `isLoggedIn===true`, иначе показывают `Authorization`.
- Заголовки запросов к API:
  - В авторизованных запросах необходим `Authorization: Bearer <accessToken>`.

## Компоненты и ответственность

- `App.js` — маршрутизация, подключение шрифтов/стилей, прокидывание `isLoggedIn`.
- `Header` — отображает состояние пользователя и навигацию.
- `Authorization` — форма логина, обработка ошибок, навигация после входа.
- `Search` — валидация параметров, отправка запросов к API (гистограммы, поиск документов).
- `SearchResults` — получение и форматирование документов.

## Состояние и хранение

- Краткоживущие поля формы — локальный `useState` в компонентах.
- Глобальное состояние авторизации — `AuthContext`.
- Токен и срок действия — `localStorage` (`accessToken`, `tokenExpire`).

## Навигация и редиректы

- После успешного входа — переход на `/`.
- При попытке открыть защищённые маршруты без токена — показ `Authorization`.

## Ошибки и ограничения (из README)

- В API отсутствуют фото и имя пользователя (используется заглушка).
- Ограничение количества документов в выборке фактически меньше, чем заявлено (см. README).

