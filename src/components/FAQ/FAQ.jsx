import React, { useState } from 'react';
import './FAQ.css';

const FAQ = () => {
  const [activeIndex, setActiveIndex] = useState(null);

  const faqData = [
    {
      category: "О сервисе",
      questions: [
        {
          question: "Что такое сервис СКАН?",
          answer: "СКАН — это сервис поиска публикаций о компаниях в средствах массовой информации по ИНН. Сервис помогает бизнесу проверять добросовестность подрядчиков и партнеров на основе публичных данных."
        },
        {
          question: "Как работает авторизация?",
          answer: "Авторизация происходит по логину и паролю. После успешного входа система сохраняет токен в localStorage, который действует определенное время. При истечении токена потребуется повторная авторизация."
        },
        {
          question: "Что такое ИНН и как его найти?",
          answer: "ИНН — Идентификационный номер налогоплательщика. Это уникальный номер, присваиваемый юридическим лицам и ИП. Найти ИНН компании можно в официальных реестрах, на сайте компании или в бухгалтерских документах."
        },
        {
          question: "Какие форматы ИНН поддерживаются?",
          answer: "Поддерживаются ИНН юридических лиц (10 цифр) и ИНН индивидуальных предпринимателей (12 цифр). Система автоматически проверяет корректность введенного номера по контрольным суммам."
        }
      ]
    },
    {
      category: "Поиск и результаты",
      questions: [
        {
          question: "Что такое тональность публикации?",
          answer: "Тональность показывает эмоциональную окраску упоминания компании: позитивная, негативная или любая. Это помогает оценить репутационный фон вокруг компании."
        },
        {
          question: "Что такое риск-факторы?",
          answer: "Риск-факторы — это публикации, в которых компания упоминается в контексте негативных событий: судебные разбирательства, финансовые проблемы, проверки регуляторов и т.д."
        },
        {
          question: "Как работает поиск по датам?",
          answer: "Вы можете указать диапазон дат для поиска публикаций. Система найдет все упоминания компании в указанный период. Даты не могут быть в будущем, а дата начала не может быть позже даты окончания."
        },
        {
          question: "Что такое lazy loading?",
          answer: "Lazy loading (ленивая загрузка) — это постепенная подгрузка результатов. Сначала показываются 10 публикаций, затем по кнопке «Показать больше» подгружаются следующие. Это ускоряет загрузку страницы."
        }
      ]
    },
    {
      category: "Тарифы и оплата",
      questions: [
        {
          question: "Какие тарифы доступны?",
          answer: "Доступны несколько тарифов с разным лимитом на количество компаний для мониторинга и количеством публикаций в поиске. Тариф Beginner подходит для небольших компаний, Professional — для среднего бизнеса."
        },
        {
          question: "Как обновить тариф?",
          answer: "Для обновления тарифа обратитесь в личном кабинете или свяжитесь с поддержкой сервиса. Новый тариф применится немедленно после оплаты."
        },
        {
          question: "Что делать, если поиск не находит результаты?",
          answer: "Проверьте корректность ИНН, попробуйте расширить диапазон дат, измените тональность на «Любая» или уберите фильтры. Если результаты все еще не находятся, возможно, у компании действительно нет публикаций в указанный период."
        },
        {
          question: "Как сохранить результаты поиска?",
          answer: "Результаты поиска можно сохранить в PDF, скопировать ссылки на публикации или экспортировать данные в Excel. Функция сохранения доступна на странице с результатами поиска."
        }
      ]
    },
    {
      category: "Техническая поддержка",
      questions: [
        {
          question: "Как связаться с поддержкой?",
          answer: "Вы можете связаться с нашей службой поддержки через форму обратной связи в личном кабинете, по электронной почте support@skan.ru или по телефону +7 495 771 21 11."
        },
        {
          question: "Какие браузеры поддерживаются?",
          answer: "Сервис корректно работает в последних версиях браузеров Google Chrome, Mozilla Firefox, Safari, Microsoft Edge. Рекомендуем использовать последнюю версию браузера для лучшей производительности."
        },
        {
          question: "Есть ли мобильное приложение?",
          answer: "На данный момент мобильное приложение находится в разработке. Сервис полностью адаптирован для работы на мобильных устройствах через браузер."
        },
        {
          question: "Как обеспечить безопасность данных?",
          answer: "Мы используем современное шифрование данных, храним токены только в защищенном localStorage, регулярно обновляем системы безопасности. Рекомендуем использовать сложные пароли и не передавать их третьим лицам."
        }
      ]
    }
  ];

  const toggleQuestion = (categoryIndex, questionIndex) => {
    const currentIndex = `${categoryIndex}-${questionIndex}`;
    setActiveIndex(activeIndex === currentIndex ? null : currentIndex);
  };

  return (
    <div className="faq-container">
      <div className="faq-content">
        <div className="faq-header">
          <h1 className="faq-title">Часто задаваемые вопросы</h1>
          <p className="faq-subtitle">
            Ответы на популярные вопросы о сервисе СКАН
          </p>
        </div>

        <div className="faq-categories">
          {faqData.map((category, categoryIndex) => (
            <div key={categoryIndex} className="faq-category">
              <h2 className="category-title">{category.category}</h2>
              <div className="faq-items">
                {category.questions.map((item, questionIndex) => {
                  const currentIndex = `${categoryIndex}-${questionIndex}`;
                  const isActive = activeIndex === currentIndex;
                  
                  return (
                    <div key={questionIndex} className="faq-item">
                      <button
                        className={`faq-question ${isActive ? 'active' : ''}`}
                        onClick={() => toggleQuestion(categoryIndex, questionIndex)}
                      >
                        <span className="question-text">{item.question}</span>
                        <span className="question-icon">
                          {isActive ? '−' : '+'}
                        </span>
                      </button>
                      <div className={`faq-answer ${isActive ? 'show' : ''}`}>
                        <p>{item.answer}</p>
                      </div>
                    </div>
                  );
                })}
              </div>
            </div>
          ))}
        </div>

        <div className="faq-contact">
          <div className="contact-card">
            <h3>Остались вопросы?</h3>
            <p>Если вы не нашли ответ на свой вопрос, свяжитесь с нашей службой поддержки</p>
            <div className="contact-buttons">
              <button className="contact-button primary">
                Написать в поддержку
              </button>
              <button className="contact-button secondary">
                Позвонить
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
};

export default FAQ;
